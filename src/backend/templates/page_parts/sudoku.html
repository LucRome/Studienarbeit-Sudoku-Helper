{% comment %} 
  Sudoku Form
  Params:
    sudoku: Sudoku Class
    range: range(0,9)
    sudoku_readonly: if True -> all Sudoku Fields are readonly
{% endcomment %}

{% load accessors %}
{% load static %}

<link rel="stylesheet" href="{% static 'css/candidates.css' %}">
<link rel="stylesheet" href="{% static 'css/sudoku.css' %}">
<script src="{% static 'js/sudoku.js' %}"></script>
<script src="{% static 'js/candidates.js' %}"></script>

{# Sudoku Form #}
<div class="sudoku d-flex justify-content-center container-fluid">
  <form method="post" id="form-sudoku">
    {% csrf_token %}
    <table>
      <tbody>
        {% for row in range %}
          <tr class="sudoku-row">
            {% for column in range %}
              <td class="sudoku-field">
                {% with field=sudoku|row:row|column:column %}
                  {% if not sudoku_readonly %}
                    {# When not readonly: Normal Input #}
                    <input id="{{row}}_{{column}}" name="{{row}}_{{column}}" type="number" value="{{ field.get_value }}" maxlength="1"/>
                  {% else %}
                    {# When readonly: Value in readonly mode or candidates #}
                    {% if field.get_value is not None %}
                      <input readonly id="{{row}}_{{column}}" name="{{row}}_{{column}}" type="number" value="{{ field.get_value }}" maxlength="1"/> 
                    {% else %}
                      {% include "components/candidates.html" with candidates=field.get_candidates %}
                    {% endif %}
                  {% endif %}
                {% endwith %}
              </td>
            {% endfor %}
          </tr>  
        {% endfor %}
      </tbody>
    </table>
  </form>
</div>

